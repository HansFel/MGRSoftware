{% extends "base.html" %}

{% block title %}Dokumentation - Maschinengemeinschaft{% endblock %}

{% block content %}
<div class="row mt-4">
    <div class="col-12">
        <h1 class="text-white mb-4">
            <i class="bi bi-book"></i> Dokumentation
        </h1>
    </div>
</div>

<div class="row mb-3">
    <div class="col-12">
        <a href="{{ url_for('dashboard.dashboard') }}" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Zurück zum Dashboard
        </a>
    </div>
</div>

{% if user_level >= 2 %}
<div class="alert alert-info">
    <i class="bi bi-shield-check"></i>
    <strong>Haupt-Administrator:</strong> Sie haben Zugriff auf alle Dokumentationen inkl. System-Dokumentation.
</div>
{% elif user_level >= 1 %}
<div class="alert alert-info">
    <i class="bi bi-shield"></i>
    <strong>Administrator:</strong> Sie haben Zugriff auf Benutzer- und Admin-Dokumentation.
</div>
{% endif %}

<div class="row">
    {% for key, category in categories.items() %}
    <div class="col-md-6 col-lg-4 mb-4">
        <div class="card h-100">
            <div class="card-header {% if category.level >= 2 %}bg-danger{% elif category.level >= 1 %}bg-warning{% else %}bg-success{% endif %} text-white">
                <h5 class="mb-0">
                    <i class="bi {{ category.icon }}"></i> {{ category.title }}
                </h5>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    {% for doc in category.docs %}
                    <li class="list-group-item">
                        <a href="{{ url_for('dokumentation.show_doc', category=key, doc_path=doc.file.split('/')[-1]) }}"
                           class="text-decoration-none">
                            <i class="bi {{ doc.icon }}"></i> {{ doc.title }}
                        </a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
            <div class="card-footer text-muted small">
                {% if category.level >= 2 %}
                <i class="bi bi-lock"></i> Nur Haupt-Administratoren
                {% elif category.level >= 1 %}
                <i class="bi bi-shield"></i> Nur Administratoren
                {% else %}
                <i class="bi bi-unlock"></i> Alle Benutzer
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% if not categories %}
<div class="alert alert-warning">
    <i class="bi bi-exclamation-triangle"></i>
    Keine Dokumentation verfügbar.
</div>
{% endif %}
{% endblock %}
